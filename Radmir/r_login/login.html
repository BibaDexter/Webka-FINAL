<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <link rel="stylesheet" href="login.css">
   <title>login</title>
</head>
<body>
   <article class="container">
      <div class="block">
         <section class="block__item block-item">
            <h2 class="block-item__title">У вас уже есть аккаунт</h2>
            <button class="block-item__btn signin-btn">Войти</button>
         </section>
         
         <section class="block__item block-item">
            <h2 class="block-item__title">У вас нет аккаунт ?</h2>
            <button class="block-item__btn signup-btn">Зарегистрироваться</button>
         </section>
      </div>

      <div class="form-box">
         
         
         <form action="#" class="form form_signup" onsubmit="registratePage(event)">
            <h3 class="form__title">Регистрация</h3>

            <p>
               <input id="login" type="text" class="form__input" placeholder="Логин" name="login">
            </p>
            <p>
               <input id="email" type="email" class="form__input" placeholder="Email" name="email">
            </p>
            
            <p>
               <input id="password" type="password" class="form__input" placeholder="Пароль" name="password">
            </p>
            <p>
               <input id="repassword" type="password" class="form__input" placeholder="Подтвердить пароль" name="repassword">
            </p>
            
               <button class="form__btn form__btn-signup" >Зарегистрироваться</button>
            
         </form>

         <form action="#" class="form form_signin">
            <h3 class="form__title">Логин</h3>

            <p>
               <input id="lemail" type="email" class="form__input" placeholder="Email" name="email">
            </p>
            <p>
               <input id="lpass" type="password" class="form__input" placeholder="Пароль" name="password">
            </p>
               <button class="form__btn" onclick="checkLoginPage()">Войти</button>
            <p>
               <a href="#" class="form__forgot">Восстановить пароль</a>
            </p>

         </form>

         
      </div>

      <script>
         const signInBtn = document.querySelector('.signin-btn');
         const signUpBtn = document.querySelector('.signup-btn');
         const formbox = document.querySelector('.form-box');
         const body = document.body;

         signUpBtn.addEventListener('click', function () {
         formbox.classList.add('active');
         body.classList.add('active')
         });
         signInBtn.addEventListener('click', function () {
         formbox.classList.remove('active');
         body.classList.remove('active')
         });

         function registratePage(event) {
            event.preventDefault();

            let login = document.getElementById('login').value
            let email = document.getElementById('email').value
            let password = document.getElementById('password').value
            let repassword = document.getElementById('repassword').value

            
            let data = event.target

            let formdata = new FormData(data)

            let form_data_obj = Object.fromEntries(formdata)
            console.log(form_data_obj);

            localStorage.setItem('login', form_data_obj.login)
            localStorage.setItem('email', form_data_obj.email)
            localStorage.setItem('password', form_data_obj.password)

            
            if (password != repassword) {
               alert('password not similar')
            } else {
               alert('Your acount has been created')
            }
         }

         function checkLoginPage() {
            event.preventDefault();

            let storedemail = localStorage.getItem('email')
            let storedPw = localStorage.getItem('password')

            let userEmail = document.getElementById('lemail')
            let userPw = document.getElementById('lpass')


            if (userEmail.value == storedemail && userPw.value == storedPw) {
               console.log(localStorage.getItem('email'))
               console.log(localStorage.getItem('password'))
               alert('You are logged in.')
               document.location.href = "file:///C:/Users/%D0%90%D0%BA%D0%B6%D0%B0%D0%BB%D0%B8/OneDrive/%D0%94%D0%BE%D0%BA%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D1%8B/GitHub/Webka-FINAL/Radmir/r_main/r_main.html"
            } else {
               alert('Error on login')
            }

         }


      </script>
   </article>
</body>
</html>